<div class="player-container">
  
  <div class="now-playing-card">
    <h2>Now Playing</h2>
    
    <div class="current-track-title">
      @if (currentSong) {
        {{ currentSong.title }}
        @if (currentSong.artist) {
          <br><small>{{ currentSong.artist }}</small>
        }
        @if (currentSong.album) {
          <br><small>{{ currentSong.album }}</small>
        }
      } @else {
        Select a track...
      }
    </div>

    <audio #audioPlayer controls></audio>
  </div>

  <div class="search-container">
    <input 
      type="text" 
      placeholder="Search by title, artist, or album..." 
      (input)="onSearch($event)"
      class="search-input"
    />
  </div>

  <div class="library-controls">
    <h3>Library</h3>
    <label>
      Sort by:
      <select class="sort-select" (change)="sortMode = $any($event.target).value">
        <option value="rating">Rating</option>
        <option value="title">Title</option>
        <option value="artist">Artist</option>
        <option value="album">Album</option>
      </select>
    </label>
  </div>

  <ul class="song-list">
    @for (song of SortedSongs; track song.id) {
      <li class="song-card" 
          [class.active]="currentSong === song" 
          (click)="play(song)">
          <img
    class="cover"
    [src]="song.cover_url "
    alt="Album cover"
  />
        
        <div class="song-info">
          <span class="song-title">{{ song.title }}</span>
          @if (song.artist) {
            <br><small>{{ song.artist }}</small>
          }
          @if (song.album) {
            <br><small>{{ song.album }}</small>
          }
        </div>

        <button class="play-btn-small">
          â–¶
        </button>
      </li>
    }
  </ul>

</div>